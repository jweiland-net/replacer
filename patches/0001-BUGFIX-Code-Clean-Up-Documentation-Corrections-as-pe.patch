From 2312a7ad241725936331a9878ad41d4c8ceff6c2 Mon Sep 17 00:00:00 2001
From: Hoja Mustaffa Abdul Latheef <hlatheef@jweiland.net>
Date: Fri, 8 Sep 2023 12:18:47 +0200
Subject: [PATCH] [BUGFIX] Code Clean Up, Documentation Corrections as per CR

---
 Classes/Helper/ReplacerHelper.php                |  7 +++++--
 Documentation/Configuration/TypoScript/Index.rst |  3 +++
 Documentation/Example/Index.rst                  | 16 +++++++++-------
 3 files changed, 17 insertions(+), 9 deletions(-)

diff --git a/Classes/Helper/ReplacerHelper.php b/Classes/Helper/ReplacerHelper.php
index 8053211..9372f13 100644
--- a/Classes/Helper/ReplacerHelper.php
+++ b/Classes/Helper/ReplacerHelper.php
@@ -50,6 +50,7 @@ class ReplacerHelper implements LoggerAwareInterface
             $typoScriptFrontendController->config,
             'config/tx_replacer.'
         );
+
         return $this->doProcessingForReplacerConfig($contentToReplace, $replacerConfig);
     }
 
@@ -85,6 +86,7 @@ class ReplacerHelper implements LoggerAwareInterface
                 );
             }
         }
+
         return $contentToReplace;
     }
 
@@ -109,6 +111,7 @@ class ReplacerHelper implements LoggerAwareInterface
                 }
             }
         }
+
         return $processedConfigurations;
     }
 
@@ -117,9 +120,9 @@ class ReplacerHelper implements LoggerAwareInterface
         return is_string($key) && substr($key, -1) === '.';
     }
 
-    protected function processContent($content, $configKey): ?string
+    protected function processContent(string $content, array $configKey): string
     {
-        if (is_array($configKey) && $this->getTypoScriptFrontendController()->cObj instanceof ContentObjectRenderer) {
+        if ($configKey && $this->getTypoScriptFrontendController()->cObj instanceof ContentObjectRenderer) {
             return $this->getTypoScriptFrontendController()->cObj->stdWrap($content, $configKey);
         }
 
diff --git a/Documentation/Configuration/TypoScript/Index.rst b/Documentation/Configuration/TypoScript/Index.rst
index 1650e31..35da777 100644
--- a/Documentation/Configuration/TypoScript/Index.rst
+++ b/Documentation/Configuration/TypoScript/Index.rst
@@ -36,10 +36,12 @@ Basic example:
 
 Outcome:
 --------
+
 Now, when visitors view your website, they will see "banana" instead of "apple" wherever it was originally used.
 
 Use a regex as search pattern
 =============================
+
 Using a regular expression (regex) as a search pattern in the Replacer Extension provides a powerful way to perform
 complex search and replace operations. Here's an elaboration:
 
@@ -67,6 +69,7 @@ Basic regex example:
 
 Outcome:
 --------
+
 Now, when visitors view your website, they will see the modified content with the replaced patterns based on the regular
 expression you defined. Using regular expressions gives you the ability to perform intricate search and replace
 operations, making it particularly useful for tasks that involve complex pattern matching.This feature provides a high
diff --git a/Documentation/Example/Index.rst b/Documentation/Example/Index.rst
index ec8b80b..dd38882 100644
--- a/Documentation/Example/Index.rst
+++ b/Documentation/Example/Index.rst
@@ -1,17 +1,18 @@
 ..  include:: /Includes.rst.txt
 
 ..  _examples:
+
 Example configurations
 ======================
 
 In this section you will find some examples how ext:replacer can be used.
 
 Replace pattern only within tags using a regex
-^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+==============================================
 
 It is even possible to replace content just within a specific tag like a parameter.
 
-**Replace content within a paragraph** ::
+**Replace content within a paragraph**
 
 Code:
 
@@ -41,11 +42,12 @@ Replaced by:
     <p class="example">REPLACE</p>
 
 Replace links for CDN usage
-^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+===========================
+
 The example TypoScript replaces typo3temp,
 typo3conf, uploads and fileadmin occurrences with CDN links.
 
-**CDN example:** ::
+**CDN example:**
 
 Code:
 
@@ -76,13 +78,13 @@ Replaced by:
 
 
 Use stdWrap for search and replacement
-^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+======================================
 
 You can use stdWrap functionality if you need a more dynamic way to search and replace content. The main step is
 equal with the basic configuration like above. You can also use a regex as search pattern and a stdWrap as replacement
 at the same time!
 
-**Use page title as replacement** ::
+**Use page title as replacement**
 
 Code:
 
@@ -99,7 +101,7 @@ Code:
       }
     }
 
-**Use page modification date as replacement** ::
+**Use page modification date as replacement**
 
 Code:
 
-- 
2.39.2 (Apple Git-143)

